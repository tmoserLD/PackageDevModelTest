<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>NB_Fields_required_for_Stage_Signature</fullName>
    <active>false</active>
    <description>This rule ensures that all Legal/Procuremen fields are filled before we can update the Opportunity stage to Signature</description>
    <errorConditionFormula>AND(
NOT(ISPICKVAL( Type , &quot;Trial&quot;)),
contains( 
$Profile.Name, &quot;Sales&quot;),
RecordType.Id &lt;&gt;&quot;01241000001USL6AAO&quot;,
NOT(ISPICKVAL(Type, &quot;Churn&quot;)),
NOT(ISPICKVAL(Type, &quot;Services&quot;)), 
NOT(ISPICKVAL(Type, &quot;Renewal&quot;)), 
NOT(ISPICKVAL(Type, &quot;Expansion&quot;)), 
NOT(ISPICKVAL(Type, &quot;Expansion Add-on&quot;)), 
NOT(ISPICKVAL(Type, &quot;Contraction&quot;)),


    OR( 
        ISBLANK(Procurement_Contact__c),
        ISBLANK(Buying_Process__c),
        ISBLANK(Legal_Contact__c )


    ),
    Contains(Text(StageName), &quot;Signature&quot;)
)</errorConditionFormula>
    <errorMessage>Please fill all &quot;Legal/Procurement&quot; fields before moving Stage to Signature:
Customer Legal Contact
Procurement Contact
What is they buying process?</errorMessage>
</ValidationRule>
