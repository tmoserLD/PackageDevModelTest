<template>

    <template if:true={isSelected}>

        <!-- Error Modal -->
        <c-error-modal>
        </c-error-modal>

        <!-- Loading Spinner -->
        <template if:true={loading}>
            <lightning-spinner
                alternative-text="Loading"
                size="medium"
            >
            </lightning-spinner>
        </template>

        <!-- Rule Tabs -->
        <lightning-tabset>
            <lightning-tab
                label="Rule Info"
                value="rule"
                onactive={handleTabChange}
            >
                <div
                    class="slds-col slds-p-horizontal_medium"
                    style="height: 60vh;overflow:auto;"
                >
                    <!-- Rule Edit Form -->
                    <c-cpq_-admin-rule-form
                        button-label="Save"
                        card-title="Edit Rule"
                        rule={rule}
                        rule-id={rule.ruleInfo.Id}
                        selected={selected}
                        onchildsaved={childSaved}
                    >
                    </c-cpq_-admin-rule-form>

                    <!-- Criteria Groups -->
                    <c-cpq_-admin-rule-criteria-groups
                        groups={rule.criteriaGroups}
                        selected={selected}
                        onselect={updateSelections}
                        onchildsaved={childSaved}
                    >
                    </c-cpq_-admin-rule-criteria-groups>

                    <!-- Actions -->
                    <c-cpq_-admin-rule-actions
                        actions={rule.actions}
                        selected={selected}
                        onselect={updateSelections}
                        onchildsaved={childSaved}
                    >
                    </c-cpq_-admin-rule-actions>
                </div>
            </lightning-tab>
        </lightning-tabset>
    </template>
</template>