<template>

    <!-- Error Modal -->
    <c-error-modal>
    </c-error-modal>

    <!-- Loading Spinner -->
    <template if:true={loading}>
        <lightning-spinner
            alternative-text="Loading"
            size="medium"
        >
        </lightning-spinner>
    </template>

    <!-- Proposal Peview Modal -->
    <template if:true={showPreview}>
        <c-cpq_-proposal-p-d-f
            opp-info={oppInfo}
            quote={quoteToPreview}
            onclose={closedPreview}
            onsave={closedPreview}
        >
        </c-cpq_-proposal-p-d-f>
    </template>

    <ul class="slds-list_horizontal">

        <!-- Normal Mode -->
        <template if:false={viewMode}>
            <template if:true={allowProposal}>
                <li class="slds-m-right_x-small">
                    <lightning-button
                        label="Preview Proposal"
                        title="Preview Proposal"
                        variant="base"
                        icon-name="utility:preview"
                        onclick={previewProposal}
                        disabled={disablePreviewButton}
                    >
                    </lightning-button>            
                </li>
            </template>
            <template if:true={isCPQAdmin}>
                <template if:true={normalMode}>
                    <li class="slds-m-right_x-small">
                        <lightning-button
                            label="Admin Mode"
                            title="Admin Mode"
                            variant="brand-outline"
                            icon-name="utility:unlock"
                            onclick={toggleAdminMode}
                        >
                        </lightning-button>            
                    </li>
                </template>
                <template if:false={normalMode}>
                    <li class="slds-m-right_x-small">
                        <lightning-button
                            label="Normal Mode"
                            title="Normal Mode"
                            variant="brand-outline"
                            icon-name="utility:lock"
                            onclick={toggleAdminMode}
                        >
                        </lightning-button>            
                    </li>
                </template>
            </template>
            <li class="slds-m-right_x-small">
                <lightning-button
                    label="Cancel"
                    title="Cancel"
                    onclick={cancel}
                    disabled={disableCancelButton}
                >
                </lightning-button>            
            </li>
            <li>
                <lightning-button
                    variant="brand"
                    label="Save"
                    title="Save"
                    onclick={saveQuote}
                    disabled={disableSaveButton}
                >
                </lightning-button>
            </li>
        </template>

        <!-- View Mode -->
        <template if:true={viewMode}>
            <template if:true={isCPQAdmin}>
                <template if:true={normalMode}>
                    <li class="slds-m-right_x-small">
                        <lightning-button
                            label="Admin View"
                            title="Admin View"
                            variant="brand-outline"
                            icon-name="utility:unlock"
                            onclick={toggleAdminMode}
                        >
                        </lightning-button>            
                    </li>
                </template>
                <template if:false={normalMode}>
                    <li class="slds-m-right_x-small">
                        <lightning-button
                            label="Normal View"
                            title="Normal View"
                            variant="brand-outline"
                            icon-name="utility:lock"
                            onclick={toggleAdminMode}
                        >
                        </lightning-button>            
                    </li>
                </template>
            </template>
            <li>
                <lightning-button
                    label="Close"
                    title="Close"
                    onclick={cancel}
                    disabled={disableCancelButton}
                >
                </lightning-button>            
            </li>
        </template>
    </ul>
</template>