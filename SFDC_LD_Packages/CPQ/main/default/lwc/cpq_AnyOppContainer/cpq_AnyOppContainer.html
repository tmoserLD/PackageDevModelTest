<template>

    <!-- Error Modal -->
    <c-error-modal>
    </c-error-modal>

    <lightning-card
        title="Open CPQ for a given Opportunity"
        variant="narrow"
    >
        <div class="slds-grid">
            <div class="slds-col slds-size_1-of-6">
                <div class="slds-p-horizontal_small">
                    <c-search-component
                        obj-name="Opportunity"
                        icon-name="standard:opportunity"
                        label-name="Opportunity"
                        placeholder="Search" 
                        fields={fields}
                        display-fields={displayFields}
                        onlookup={handleLookup} >
                    </c-search-component>
                </div>
                <template if:false={hasOppId}>
                    <div style="max-height: 50vh;overflow:auto">
                        <c-item-selector
                            items={recentlyViewed}
                            selected-value="nothing"
                            selected-attribute="nothing"
                            list-style="column"
                            header="Recently Viewed"
                            header-attribute="name"
                            footer-attribute1="ownerName"
                            footer-label1="Owner: "
                            footer-attribute2="accountName"
                            footer-label2="Account: "
                            icon-name="standard:opportunity"
                            show-search="false"
                            show-create="false"
                            onselect={recordSelected}
                        >
                        </c-item-selector>
                    </div>
                </template>
            </div>
            <div class="slds-col slds-size_5-of-6 slds-p-around_small">
                <template if:true={hasOppId}>
                    <c-cpq_-container
                        record-id={oppId}
                    >
                    </c-cpq_-container>
                </template>
            </div>
        </div>
    </lightning-card>
</template>