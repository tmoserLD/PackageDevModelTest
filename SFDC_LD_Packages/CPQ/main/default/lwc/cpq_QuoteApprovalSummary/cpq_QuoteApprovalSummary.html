<template>
    <div class="slds-grid_vertical slds-m-top_x-small slds-p-horizontal_x-small">
        <div
            class="slds-col slds-grid slds-text-heading_small slds-p-around_x-small"
            style="border-radius: 10px;background-color: rgb(163, 206, 241)"
        >
            <div>
                <ul class="slds-list_horizontal">
                    <li
                        class="slds-m-right_small"
                        style="cursor:pointer"
                        onclick={toggleCollapse}    
                    >
                        <template if:true={collapsed}>
                            <lightning-icon
                                icon-name="utility:expand_alt"
                                alternative-text="Expand"
                                title="Expand"
                                size="x-small"
                            >
                            </lightning-icon>
                        </template>
                        <template if:false={collapsed}>
                            <lightning-icon
                                icon-name="utility:contract_alt"
                                alternative-text="Collapse"
                                title="Collapse"
                                size="x-small"
                            >
                            </lightning-icon>
                        </template>
                    </li>
                    <li>
                        Approval Summary
                    </li>
                </ul>
            </div>

            <div class="slds-col_bump-left slds-size_1-of-12 slds-p-left_medium">
                <div class="slds-align_absolute-center">
                    <lightning-icon
                        icon-name="utility:priority"
                        alternative-text="Approval(s) Needed"
                        title="Approval(s) Needed"
                        size="x-small"
                        variant="warning"
                    >
                    </lightning-icon>
                </div>
            </div>
        </div>

        <template if:false={collapsed}>
            <!-- Table Header -->
            <div
                class="slds-col slds-grid slds-theme_default slds-p-around_x-small"
                style="border-bottom: 0.5px solid gray;font-weight: bold;"
            >
                <div class="slds-col slds-size_1-of-3 slds-p-horizontal_xx-small">
                    Approval
                </div>
                <div class="slds-col slds-size_1-of-3 slds-p-horizontal_xx-small">
                    Reason
                </div>
                <div class="slds-col slds-size_1-of-3 slds-p-horizontal_xx-small">
                    Approvers
                </div>
            </div>

            <!-- Quote Approvals -->
            <div
                class="slds-col slds-grid_vertical slds-theme_default slds-p-around_x-small"
                style="max-height: 30vh;overflow:auto;"
            >
                <template
                    for:each={quoteApprovals}
                    for:item="approval"
                >
                    <div key={approval.approvalInfo.Id}>
                        <c-cpq_-quote-approval
                            approval={approval}
                            quote-approvals={quoteApprovals}
                            user-info={userInfo}
                        >
                        </c-cpq_-quote-approval>
                    </div>
                </template>
            </div>
        </template>
    </div>
</template>