<template>

    <template if:true={isSelected}>

        <!-- Error Modal -->
        <c-error-modal>
        </c-error-modal>

        <!-- Loading Spinner -->
        <template if:true={loading}>
            <lightning-spinner
                alternative-text="Loading"
                size="medium"
            >
            </lightning-spinner>
        </template>

        <!-- Product Tabs -->
        <lightning-tabset>

            <lightning-tab
                label="Product Info"
                value="product"
                onactive={handleTabChange}
            >
                <div
                    class="slds-col slds-p-horizontal_medium slds-p-bottom_xx-large"
                    style="height: 60vh;overflow:auto;"
                >

                    <!-- Product Edit Form -->
                    <c-cpq_-admin-product-form
                        button-label="Save"
                        card-title="Edit Product"
                        product={product}
                        product-id={product.Id}
                        onchildsaved={childSaved}
                    >
                    </c-cpq_-admin-product-form>

                    <!-- Rule Criteria that reference Product -->
                    <c-item-selector
                        items={product.CPQ_Playbook_Rule_Criteria__r}
                        list-style="row"
                        header-attribute="Name"
                        footer-attribute1="IsActive__c"
                        footer-label1="Active: "
                        icon-name="standard:filter_criteria_rule"
                        show-search="false"
                        show-create="false"
                        header="Rule Criteria referencing this Product"
                        onselect={ruleCriterionSelected}
                    >
                    </c-item-selector>

                    <!-- Approval Criteria that reference Product -->
                    <c-item-selector
                        items={product.CPQ_Playbook_Approval_Criteria__r}
                        list-style="row"
                        header-attribute="Name"
                        footer-attribute1="IsActive__c"
                        footer-label1="Active: "
                        icon-name="standard:filter_criteria_rule"
                        show-search="false"
                        show-create="false"
                        header="Approval Criteria referencing this Product"
                        onselect={approvalCriterionSelected}
                    >
                    </c-item-selector>

                    <!-- Proposal Criteria that reference Product -->
                    <c-item-selector
                        items={product.CPQ_Playbook_Proposal_Criteria__r}
                        list-style="row"
                        header-attribute="Name"
                        footer-attribute1="IsActive__c"
                        footer-label1="Active: "
                        icon-name="standard:filter_criteria_rule"
                        show-search="false"
                        show-create="false"
                        header="Proposal Criteria referencing this Product"
                        onselect={proposalCriterionSelected}
                    >
                    </c-item-selector>

                    <!-- Rule Actions that reference Product -->
                    <c-item-selector
                        items={product.CPQ_Playbook_Rule_Actions__r}
                        list-style="row"
                        header-attribute="Name"
                        footer-attribute1="IsActive__c"
                        footer-label1="Active: "
                        icon-name="standard:actions_and_buttons"
                        show-search="false"
                        show-create="false"
                        header="Rule Actions referencing this Product"
                        onselect={actionSelected}
                    >
                    </c-item-selector>

                    <!-- Rule Calculation Items that reference Product -->
                    <c-item-selector
                        items={product.CPQ_Playbook_Rule_Calculation_Items__r}
                        list-style="row"
                        header-attribute="Name"
                        footer-attribute1="IsActive__c"
                        footer-label1="Active: "
                        footer-attribute2="Action_Name__c"
                        footer-label2="Action: "
                        icon-name="standard:calculated_insights"
                        show-search="false"
                        show-create="false"
                        header="Rule Calculation Items referencing this Product"
                        onselect={calcItemSelected}
                    >
                    </c-item-selector>

                    <!-- Empty Spacer -->
                    <div style="height: 250px;">
                    </div>
                </div>
            </lightning-tab>
        </lightning-tabset>
    </template>
</template>