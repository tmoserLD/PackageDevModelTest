<template>

    <template if:true={isSelected}>

        <!-- Error Modal -->
        <c-error-modal>
        </c-error-modal>

        <!-- Loading Spinner -->
        <template if:true={loading}>
            <lightning-spinner
                alternative-text="Loading"
                size="medium"
            >
            </lightning-spinner>
        </template>

        <!-- Playbook Tabs -->
        <lightning-tabset active-tab-value={tabValue}>

            <lightning-tab
                label="Playbook Info"
                value="playbook"
                onactive={handleTabChange}
            >
                <div
                    class="slds-col slds-p-horizontal_medium"
                    style="height: 60vh;overflow:auto;"
                >
                    <c-cpq_-admin-playbook-form
                        button-label="Save"
                        card-title="Edit Playbook"
                        playbook={playbook}
                        playbook-id={playbook.playbookInfo.Id}
                        onchildsaved={childSaved}
                    >
                    </c-cpq_-admin-playbook-form>
                </div>
            </lightning-tab>

            <lightning-tab
                label="Question Groups"
                value="questionGroups"
                onactive={handleTabChange}
                onclick={tabClick}
            >
                <c-cpq_-admin-question-groups
                    question-groups={playbook.questionGroups}
                    selected={selected}
                    onselect={updateSelections}
                    onchildsaved={childSaved}
                >
                </c-cpq_-admin-question-groups>
            </lightning-tab>

            <lightning-tab
                label="Rules"
                value="rules"
                onactive={handleTabChange}
            >
                <c-cpq_-admin-rules
                    rules={playbook.rules}
                    selected={selected}
                    onselect={updateSelections}
                    onchildsaved={childSaved}
                >
                </c-cpq_-admin-rules>
            </lightning-tab>

            <lightning-tab
                label="Approvals"
                value="approvals"
                onactive={handleTabChange}
            >
                <c-cpq_-admin-approvals
                    approvals={playbook.approvals}
                    selected={selected}
                    onselect={updateSelections}
                    onchildsaved={childSaved}
                >
                </c-cpq_-admin-approvals>
            </lightning-tab>

            <lightning-tab
                label="Proposal Sections"
                value="proposalSections"
                onactive={handleTabChange}
            >
                <c-cpq_-admin-proposal-sections
                    sections={playbook.proposalSections}
                    selected={selected}
                    onselect={updateSelections}
                    onchildsaved={childSaved}
                >
                </c-cpq_-admin-proposal-sections>
            </lightning-tab>
        </lightning-tabset>
    </template>
</template>